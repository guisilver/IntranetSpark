<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/WEB-INF/template.xhtml">
	<ui:define name="content">
		<style>
.gridSemBorda>tbody>tr>td {
	border: 0px !important;
}

.ui-dialog-content {
	overflow-y: scroll !important;
	max-height: 600px !important;
}

.ui-column-filter {
	width: 70px !important;
}

.calendar input {
	width: 90px;
}

.colCod input {
	width: 30px !important;
}

.ui-datatable table tbody tr td .ui-outputlabel {
	font-size: 12px !important;
}
</style>

		<div class="layout-portlets-box trilha"
			style="padding-top: 0px !important; padding-bottom: 0px !important;">
			<p:breadCrumb>
				<p:menuitem value="Home" url="/dashboard.xhtml" />
				<p:menuitem value="Entrevistas" url="/rh/entrevistas" />
				<p:menuitem value="Lista Candidatos" url="/rh/candidatos" />
				<p:menuitem value="Novo Candidato"
					url="/rh/candidatos/novo-candidato.xhtml" />
				<p:menuitem value="Pré Cadastro" url="/rh/candidatos/pre-cadastro" />
				<p:menuitem value="Vagas" url="/rh/vagas" />
			</p:breadCrumb>
		</div>

		<div class="layout-portlets-box">
			<div class="DispInlBlock TexAlLeft">
				<div class="Fleft">
					<h2 class="black Fs24 FontRalewayMedium">Relatório de Vagas</h2>
				</div>
			</div>
			<div class="Seperator"></div>
			<div class="Container100 Responsive100">
				<p:messages id="msgs" />
				<h:form id="frmRelatorio">

					<p:panelGrid id="gridFiltro" columns="2" style="margin-top:10px;">
						<f:facet name="header">
							<h:outputText value="Filtros" />
						</f:facet>
						<p:outputLabel value="Responsável:" />
						<p:selectOneMenu id="selectResponsavel" filter="true"
							filterMatchMode="contains" required="true"
							value="#{relatorioVagasMB.responsavelVaga}"
							converter="omnifaces.SelectItemsConverter" style="width:300px;">
							<f:selectItem itemLabel="Todos" itemValue="Todos" />
							<f:selectItems var="responsavel"
								value="#{relatorioVagasMB.listaUsuarioRH}"
								itemLabel="#{responsavel}" itemValue="#{responsavel}" />
						</p:selectOneMenu>

						<p:outputLabel value="Período:" />
						<h:panelGrid columns="10" styleClass="gridSemBorda">
							<p:selectBooleanCheckbox value="#{relatorioVagasMB.pendentes}" />
							<p:outputLabel value="Pendente:" />
							<p:selectBooleanCheckbox value="#{relatorioVagasMB.emAndamento}" />
							<p:outputLabel value="Em Andamento:" />
							<p:selectBooleanCheckbox value="#{relatorioVagasMB.standBy}" />
							<p:outputLabel value="Stand By:" />
							<p:selectBooleanCheckbox value="#{relatorioVagasMB.canceladas}" />
							<p:outputLabel value="Canceladas:" />
							<p:selectBooleanCheckbox value="#{relatorioVagasMB.concluidas}" />
							<p:outputLabel value="Concluídas:" />
						</h:panelGrid>

						<p:outputLabel value="Período:" />
						<p:column>
							<p:calendar mask="true" pattern="dd/MM/yyyy" locale="pt"
								timeZone="America/Sao_Paulo"
								value="#{relatorioVagasMB.dataInicio}" navigator="true"
								yearRange="c-5:c+1" styleClass="calendar" />
							<p:outputLabel value="à" style="margin-left:5px;" />
							<p:calendar mask="true" pattern="dd/MM/yyyy" locale="pt"
								timeZone="America/Sao_Paulo" value="#{relatorioVagasMB.dataFim}"
								navigator="true" yearRange="c-5:c+1" style="margin-left:5px;"
								styleClass="calendar" />
							<p:commandButton icon="fa fa-search Fs16 white" value="Pesquisar"
								action="#{relatorioVagasMB.pesquisaRelatorio()}" process="@form"
								update="@form" style="margin-left:5px;" />
						</p:column>
					</p:panelGrid>

					<p:panelGrid id="panelPie">
						<div style="margin-top: 20px;">
							<p:outputLabel value="Total de Vagas:" />
							<p:outputLabel value=" #{relatorioVagasMB.totalVagas}"
								style="color:red;margin-right:20px;" />
							<c:forEach items="#{relatorioVagasMB.rv}" var="rv">
								<p:outputLabel value="#{rv.nome}:" />
								<p:outputLabel value=" #{rv.qtd} %"
									style="color:red;margin-right:20px;" />
							</c:forEach>
						</div>
						<p:chart id="pie" type="pie" model="#{relatorioVagasMB.pizza}"
							responsive="true" style="margin-top:20px;"
							rendered="#{relatorioVagasMB.listaVagas != null}">
							<p:ajax event="itemSelect"
								listener="#{relatorioVagasMB.selectVagas}" update=":frmVagas" />
						</p:chart>
					</p:panelGrid>
				</h:form>
			</div>
		</div>

		<p:dialog widgetVar="dlgVagas" header="Vagas" width="90%" modal="true"
			resizable="false">
			<h:form id="frmVagas">
				<h:panelGrid columns="2">
					<p:outputLabel value="Situação:" />
					<p:outputLabel value="#{relatorioVagasMB.situacao}"
						style="color:red;" />
				</h:panelGrid>
				<p:dataTable value="#{relatorioVagasMB.listaVagasView}"
					filteredValue="#{relatorioVagasMB.fltrVagasView}" var="vaga"
					rows="10" paginator="true" style="margin-top:20px;">
					<p:column headerText="Cód." width="50" filterBy="#{vaga.codigo}"
						styleClass="colCod" rendered="false">
						<p:outputLabel value="#{vaga.codigo}" />
					</p:column>
					<p:column headerText="Abertura" width="100"
						filterBy="#{vaga.dataAberturaStr}" sortBy="#{vaga.dataAbertura}"
						style="text-align:center;">
						<p:outputLabel value="#{vaga.dataAberturaStr}" />
					</p:column>
					<p:column headerText="Encerramento"
						filterBy="#{vaga.dataEncerramentoStr}"
						sortBy="#{vaga.dataEncerramento}" width="110"
						style="text-align:center;">
						<p:outputLabel value="#{vaga.dataEncerramentoStr}" />
					</p:column>
					<p:column headerText="Gerente" sortBy="#{vaga.nomeGerente}"
						filterBy="#{vaga.nomeGerente}" filterMatchMode="contains">
						<p:outputLabel value="#{vaga.nomeGerente}" />
					</p:column>
					<p:column headerText="Condomínio" sortBy="#{vaga.cndCodNome}"
						filterBy="#{vaga.cndCodNome}">
						<p:outputLabel value="#{vaga.cndCodNome}" />
					</p:column>
					<p:column headerText="Cargo" sortBy="#{vaga.cargo}"
						filterBy="#{vaga.cargo}" filterMatchMode="contains">
						<p:outputLabel value="#{vaga.cargo}" />
					</p:column>
					<p:column headerText="Salário" sortBy="#{vaga.salario}"
						filterBy="#{vaga.salario}" filterMatchMode="contains" width="130">
						<p:outputLabel value="#{vaga.salario}">
							<f:convertNumber currencySymbol="R$" minFractionDigits="2" />
						</p:outputLabel>
					</p:column>
					<p:column headerText="Responsável" sortBy="#{vaga.responsavelVaga}"
						filterBy="#{vaga.responsavelVaga}" filterMatchMode="contains">
						<p:outputLabel value="#{vaga.responsavelVaga}" />
					</p:column>
				</p:dataTable>
			</h:form>
		</p:dialog>

		<p:ajaxStatus onstart="PF('statusDialog').show()"
			onsuccess="PF('statusDialog').hide()" />
		<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
			closable="false" resizable="false" showHeader="false">
					Aguarde...<br />
			<br />
			<p:graphicImage library="imagens" name="loader.gif" />
		</p:dialog>

	</ui:define>
</ui:composition>