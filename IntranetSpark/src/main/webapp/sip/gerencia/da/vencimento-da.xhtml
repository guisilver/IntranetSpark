<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	template="/WEB-INF/template.xhtml">
	<ui:define name="content">
		<div class="layout-portlets-box">
			<div class="DispInlBlock TexAlLeft">
				<div class="Fleft">
					<h2 class="black Fs24 FontRalewayMedium">Consulta - Vencimento
						DA</h2>
				</div>
			</div>
			<div class="Seperator"></div>
			<div class="Container100 Responsive100">
				<h:form id="frmTblVencimentoDA">
					<p:panelGrid columns="4" style="margin-top:10px;">
						<f:facet name="header">
							<h:outputText value="Filtros" />
						</f:facet>
						<p:outputLabel value="Situação:" />
						<p:selectOneRadio value="#{vencimentoDAMB.situacao}">
							<f:selectItem itemLabel="À pagar" itemValue="1" />
							<f:selectItem itemLabel="Pagos" itemValue="2" />
						</p:selectOneRadio>
					</p:panelGrid>
					<p:panelGrid id="gridFiltro" columns="11" style="margin-top:10px;">
						<p:outputLabel value="Período:" />
						<p:column>
							<p:calendar mask="true" pattern="dd/MM/yyyy" locale="pt"
								timeZone="America/Sao_Paulo"
								value="#{vencimentoDAMB.dataInicio}" navigator="true"
								yearRange="c-5:c+1" styleClass="calendar" />
							<p:outputLabel value="à" style="margin-left:5px;" />
							<p:calendar mask="true" pattern="dd/MM/yyyy" locale="pt"
								timeZone="America/Sao_Paulo" value="#{vencimentoDAMB.dataFim}"
								navigator="true" yearRange="c-5:c+1" style="margin-left:5px;"
								styleClass="calendar" />
						</p:column>
						<p:outputLabel value="Sem Imagem" />
						<p:selectBooleanCheckbox id="boolSI"
							value="#{vencimentoDAMB.semImg}" />
						<p:outputLabel value="Com Imagem" />
						<p:selectBooleanCheckbox id="boolCI"
							value="#{vencimentoDAMB.comImg}" />
						<p:commandButton icon="fa fa-search Fs16 white"
							action="#{vencimentoDAMB.pesquisarVencimentoDA()}"
							oncomplete="checkCookie();" update="@form" />
						<p:outputLabel value="Fonte:" />
						<p:selectOneMenu value="#{vencimentoDAMB.fonte}"
							widgetVar="selectFonte" style="width:50px;"
							onchange="changeFontSize();">
							<p:ajax process="@this" />
							<f:selectItem itemLabel="12" itemValue="12" />
							<f:selectItem itemLabel="13" itemValue="13" />
							<f:selectItem itemLabel="14" itemValue="14" />
							<f:selectItem itemLabel="15" itemValue="15" />
							<f:selectItem itemLabel="16" itemValue="16" />
							<f:selectItem itemLabel="17" itemValue="17" />
							<f:selectItem itemLabel="18" itemValue="18" />
						</p:selectOneMenu>
					</p:panelGrid>
					<p:dataTable id="tblVencDA"
						value="#{vencimentoDAMB.listaVencimentoDA}"
						filteredValue="#{vencimentoDAMB.fltrVencimentoDA}" var="v"
						rows="50" paginator="true"
						emptyMessage="Nenhum resultado encontrado." editable="true"
						editMode="cell" style="margin-top:20px;" rowStyleClass="foco">
						<p:ajax event="cellEdit" listener="#{vencimentoDAMB.onCellEdit}" />
						<p:column headerText="Vencto" width="65" styleClass="col40"
							style="text-align:center;" filterBy="#{v.vencimentoTxt}"
							sortBy="#{v.vencimentoTxt}">
							<h:outputText value="#{v.vencimentoTxt}" />
						</p:column>
						<p:column headerText="Condomínio" filterBy="#{v.cndCodNome}"
							sortBy="#{v.cndCodNome}" filterMatchMode="contains"
							styleClass="col80" width="120">
							<h:outputText value="#{v.cndCodNome}" />
						</p:column>
						<p:column headerText="ID" filterBy="#{v.nro_identificacao}"
							sortBy="#{v.nro_identificacao}" filterMatchMode="contains"
							styleClass="col80" width="100">
							<h:outputText value="#{v.nro_identificacao}" />
						</p:column>
						<p:column headerText="Conta" filterBy="#{v.conta}"
							sortBy="#{v.conta}" filterMatchMode="contains" styleClass="col30"
							width="50" style="text-align:center;">
							<h:outputText value="#{v.conta}" />
						</p:column>
						<p:column headerText="Histórico" filterBy="#{v.historico}"
							sortBy="#{v.historico}" filterMatchMode="contains"
							styleClass="col80" width="200">
							<h:outputText value="#{v.historico}" />
						</p:column>
						<p:column headerText="Credor" filterBy="#{v.credor}"
							sortBy="#{v.credor}" filterMatchMode="contains"
							styleClass="col60" width="80">
							<h:outputText value="#{v.credor}" />
						</p:column>
						<p:column headerText="P/R" filterBy="#{v.estimado}"
							sortBy="#{v.estimado}" filterMatchMode="contains"
							styleClass="col5" width="20" style="text-align:center;"
							rendered="#{vencimentoDAMB.situacao == 1}">
							<h:outputText value="#{v.estimado}" />
						</p:column>
						<p:column headerText="Valor" width="75" filterBy="#{v.valor}"
							sortBy="#{v.valor}" styleClass="col40">
							<h:outputText value="#{v.valor}">
								<f:convertNumber type="currency" currencySymbol="R$"
									minFractionDigits="2" />
							</h:outputText>
						</p:column>
						<p:column headerText="Obs" filterMatchMode="contains"
							style="padding:0px!important" styleClass="col40">
							<h:outputText value="#{v.obs}" />
						</p:column>
						<p:column headerText="Follow Up" filterBy="#{v.obsFM}"
							filterMatchMode="contains" styleClass="col40">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{v.obsFM}" />
								</f:facet>
								<f:facet name="input">
									<p:inputTextarea value="#{v.obsFM}" maxlength="500"
										style="margin: 0px!important;width: 90%;">
										<p:ajax process="@this" />
									</p:inputTextarea>
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column width="15" style="text-align:center;">
							<p:commandLink rendered="#{v.possuiImg}">
								<p:ajax oncomplete="clicaBtnDwld();" />
								<f:setPropertyActionListener value="#{v.nrolancto}"
									target="#{vencimentoDAMB.idImg}" />
								<p:graphicImage library="imagens" name="pdf.gif" height="13" />
							</p:commandLink>
						</p:column>
					</p:dataTable>
				</h:form>
			</div>
		</div>
		<h:form id="frmDwld" target="_blank">
			<p:commandButton id="btnDwldImg"
				actionListener="#{vencimentoDAMB.baixarImg()}" ajax="false"
				style="visibility:hidden;top:-100px!important;position:absolute;" />
		</h:form>
		<script>
			function clicaBtnDwld() {
				$("[id='frmDwld:btnDwldImg']").click();
			}
		</script>
		<p:ajaxStatus onstart="PF('statusDialog').show();"
			onsuccess="PF('statusDialog').hide();checkCookie();" />
		<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
			closable="false" resizable="false" showHeader="false">
					Aguarde...<br />
			<br />
			<p:graphicImage library="imagens" name="loader.gif" />
		</p:dialog>
		<ui:include src="/includes/fonte.xhtml" />
	</ui:define>
</ui:composition>