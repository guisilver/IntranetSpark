<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<ui:composition>
	<style>
#frmLancamento\3a dtVencimento>button {
	margin-left: 5px;
}

#frmLancamento\3a gridCreditoEmConta label,
	#frmLancamento\3a gridCreditoEmConta input {
	margin-right: 5px;
}

#frmLancamento\3a gridCreditoEmConta input {
	margin-right: 10px;
}

.fileupload-content {
	visibility: hidden !important;
	z-index: 2 !important;
	border-collapse: false !important;
	position: absolute !important;
}

.files {
	border-collapse: false;
	position: abostule;
	visibility: hidden;
}

.fileupload-buttonbar {
	border-width: 0px;
	background-color: white;
}

#frmLancamento\:dtLancto\:clCondominio\:filter {
	width: 35px !important;
}

#frmLancamento\:panelSelRat>tbody:nth-child(1)>tr:nth-child(1)>td:nth-child(2)
	{
	border: 0px !important;
}
</style>
	<h:form id="frmLancamento" styleClass="frmLancamento"
		rendered="#{SessaoMB.igp.sysAdmin || SessaoMB.igp.sysSipLancamento}">

		<h:panelGrid id="plgGrid1">
			<p:panel header="Pré-lançamentos para Aprovar"
				rendered="#{ged.proxima1}">

				<p:dataTable id="dtLancto" var="p" value="#{ged.listarCndpagarOma}"
					rowKey="#{p.codigo}" rows="10" paginator="true">

					<p:column headerText="Vencimento"
						style="text-align: center !important; width: 100px !important;"
						sortBy="#{p.vencimento}" filterBy="#{p.vencimento}">
						<p:outputLabel value="#{p.vencimento}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</p:outputLabel>
					</p:column>

					<p:column id="clCondominio" headerText="Condomínio"
						sortBy="#{p.condominio}" filterBy="#{p.condominio}"
						filterMatchMode="contains"
						style="text-align: center !important; width: 80px !important;">
						#{p.condominio}
					</p:column>

					<p:column id="clFornecedor" headerText="Fornecedor"
						sortBy="#{ged.listarFornecedor(p.credor)}"
						filterBy="#{ged.listarFornecedor(p.credor)}">
						<p:outputLabel value="#{ged.listarFornecedor(p.credor)}" />
					</p:column>

					<p:column id="clCnpjFornecedor" headerText="CNPJ Fornecedor"
						style="width: 170px !important;"
						sortBy="#{ged.listarFornecedorCNPJ(p.credor)}"
						filterBy="#{ged.listarFornecedorCNPJ(p.credor)}">
						<p:outputLabel value="#{ged.listarFornecedorCNPJ(p.credor)}" />
					</p:column>

					<p:column id="clValorBruto" headerText="Valor Bruto"
						sortBy="#{p.valor}" style="width: 150px !important;"
						filterBy="#{p.valor}">
						<p:outputLabel value="R$ " />
						<p:outputLabel id="oplValorBruto" value="#{p.valor}">
							<f:convertNumber pattern="#,##0.00" locale="pt"
								for="oplValorBruto" />
						</p:outputLabel>
					</p:column>

					<p:column id="clValorLiq" headerText="Valor Liq."
						sortBy="#{p.valor}" style="width: 150px !important;"
						filterBy="#{p.valor}">
						<p:outputLabel value="R$ " />
						<p:outputLabel id="oplValorLiq" value="#{p.valor}"
							style="width: 150px !important;">
							<f:convertNumber pattern="#,##0.00" locale="pt" for="oplValorLiq" />
						</p:outputLabel>
					</p:column>

					<p:column headerText="Historico">
						#{p.historico}
					</p:column>

					<p:column id="clStatus" headerText="Status"
						style="width: 100px !important;">
						#{p.preLancamento ? 'Pré-Lancto' : p.fiscalGed ? 'Fiscal' : p.lanctoGed ? 'Lançamento' : p.gerenteGed ? 'Gerente' : ''}
					</p:column>

					<p:column style="width:70px;text-align: center">
						<p:commandButton icon="fa fa-search Fs16 white"
							action="#{ged.avancar(p)}" disabled="#{p.fiscalGed}"
							update=":frmLancamento:plgGrid1 :frmLancamento:plgGrid2" />
					</p:column>

				</p:dataTable>

			</p:panel>
		</h:panelGrid>

		<h:panelGrid id="plgGrid2">
			<p:panel header="Lançamento" rendered="#{ged.proxima2}">

				<center>
					<p:outputLabel value="Condomínio #{ged.cndpagar.condominio}"
						style="font-size:16px;color:red;font-weight:bold;" />
				</center>
				<div
					style="margin-left: 20px; margin-top: 15px; padding-top: 15px; padding-bottom: 15px;"
					align="center">
					<h:panelGrid id="pnlLancto"
						style="width:auto;margin-left: auto; margin-right: auto;display:inline-block;vertical-align:top;">
						<p:panelGrid columns="2" id="pnlLancto2">

							<p:outputLabel value="Classificação" />
							<p:selectOneMenu value="#{ged.classificacao}"
								style="width: 120px !important;">
								<f:selectItem itemLabel="Venda" itemValue="V" />
								<f:selectItem itemLabel="Serviços" itemValue="S" />
								<f:selectItem itemLabel="Venda / Serviços" itemValue="VS" />
							</p:selectOneMenu>

							<p:outputLabel value="Vencimento"
								for=":frmLancamento:dtVencimento" />
							<p:calendar id="dtVencimento" mask="true" locale="pt"
								timeZone="America/Sao_Paulo" pattern="dd/MM/yyyy"
								value="#{ged.vencimento}" required="true"
								requiredMessage="Insira a data de vencimento!" navigator="true" />


							<p:outputLabel value="Pagamento Rateado:" />

							<h:panelGrid id="panelSelRat" columns="4"
								style="border:0px !important;">
								<p:selectOneRadio value="#{ged.rateado}" id="sorRateio">
									<f:selectItem itemLabel="S" itemValue="S" />
									<f:selectItem itemLabel="N" itemValue="N" />
									<p:ajax listener="#{ged.limparRateio()}"
										update=":frmLancamento:panelRat :frmLancamento:panelValRat 
											:frmLancamento:colRateado :frmLancamento:pnlCtCont :frmLancamento:panelSelRat
											:frmLancamento:pnlNmCont :frmLancamento:pnlSelParc :frmLancamento:txtComplemento" />
								</p:selectOneRadio>

								<h:panelGrid id="colRateado" style="border:0px !important;">
									<p:commandButton value="Rateio" id="cmbRateio"
										rendered="#{ged.rateado == 'S'}" immediate="true"
										onclick="PF('dlgValRat').show();" />
								</h:panelGrid>
							</h:panelGrid>

							<h:panelGrid id="panelRat" columns="2">
								<p:outputLabel id="oplValor" value="Valor"
									rendered="#{ged.rateado == 'N'}" styleClass="mascaraMonetaria"
									for=":frmLancamento:txtValor" />
								<p:outputLabel id="oplValorBruto" value="Valor Bruto"
									for=":frmLancamento:txtValorBt"
									rendered="#{ged.rateado == 'S'}" />
							</h:panelGrid>

							<h:panelGrid id="panelValRat" columns="2">
								<c:if test="#{ged.rateado eq 'N'}">
									<p:inputText name="txtValor" id="txtValor" value="#{ged.valor}"
										required="true" requiredMessage="Insira o valor!" />
								</c:if>
								<p:outputLabel id="txtValorBt" value="#{ged.rat.valorBruto}"
									rendered="#{ged.rateado eq 'S'}">
									<f:convertNumber type="currency" currencySymbol="R$"
										locale="pt" />
								</p:outputLabel>
							</h:panelGrid>

							<h:panelGrid id="pnlNmCont" columns="2">
								<p:outputLabel value="Conta contábil"
									rendered="#{ged.rateado == 'N'}" />
								<p:outputLabel value="Qtde. de Contas"
									rendered="#{ged.rateado == 'S'}" />
							</h:panelGrid>

							<p:column>
								<h:panelGrid id="pnlCtCont" columns="2">
									<p:outputLabel value="Conta:"
										for=":frmLancamento:txtContaContabil"
										rendered="#{ged.rateado == 'N'}" />
									<p:column rendered="#{ged.rateado == 'N'}">
										<p:inputText id="txtContaContabil"
											rendered="#{ged.rateado == 'N'}" value="#{ged.contaContabil}"
											onkeypress="validate(event)" maxlength="9" required="true"
											requiredMessage="Insira a conta!">
											<p:ajax listener="#{ged.pesquisaContaCod()}"
												update=":frmLancamento:txtContaContabil,:frmLancamento:nomeContaContabil" />
										</p:inputText>
										<p:commandButton icon="fa fa-search Fs16 white"
											immediate="true" rendered="#{ged.rateado == 'N'}"
											style="margin-left:5px;" onclick="PF('dlgPesqConta').show();" />
									</p:column>
									<p:outputLabel value="Nome:" rendered="#{ged.rateado == 'N'}" />
									<p:outputLabel id="nomeContaContabil"
										rendered="#{ged.rateado == 'N'}" value="#{ged.nomeConta}"
										style="margin-top:5px;" />

									<p:outputLabel value="#{ged.qtdeDeContas}"
										rendered="#{ged.rateado == 'S'}" />
								</h:panelGrid>
							</p:column>

							<p:outputLabel value="Tipo de Documento" />
							<p:selectOneMenu value="#{ged.tipoDocumento}"
								style="width: 120px !important;">
								<p:ajax
									update=":frmLancamento:lblTipoDoc, :frmLancamento:colHistorico" />
								<f:selectItem itemLabel="Nota Fiscal" itemValue="N.F" />
								<f:selectItem itemLabel="Nota Débito" itemValue="N. Debito" />
								<f:selectItem itemLabel="Recibo" itemValue="REC." />
							</p:selectOneMenu>

							<p:outputLabel value="Fornecedor" />
							<p:column>
								<h:panelGrid columns="2" id="pnlCPF">
									<p:outputLabel value="CPF/CNPJ:" id="oplCPF"
										for=":frmLancamento:txtFornecedor" />
									<p:column>
										<p:inputText id="txtFornecedor" onkeypress="validate(event)"
											value="#{ged.fornecedor}" maxlength="14">
											<p:ajax event="blur" listener="#{ged.pesquisaFornecedor()}"
												update=":frmLancamento:txtNomeFornecedor" />
										</p:inputText>
										<p:commandButton icon="fa fa-search Fs16 white"
											immediate="true" style="margin-left:5px;"
											onclick="PF('dlgPesqFornecedor').show();" />
									</p:column>
									<p:outputLabel value="Nome:" />
									<p:outputLabel id="txtNomeFornecedor"
										value="#{ged.nomeFornecedor}" style="margin-top:5px;"
										disabled="true" />
								</h:panelGrid>
							</p:column>

							<p:outputLabel value="Empresa" />
							<p:inputText id="txtDescricao" value="#{ged.empresa}"
								maxlength="50">
								<p:ajax event="blur" update=":frmLancamento:colHistorico" />
							</p:inputText>

							<p:outputLabel value="#{ged.tipoDocumento}" id="lblTipoDoc" />
							<p:inputText onkeypress="validate(event)" id="txtNF"
								value="#{ged.notaFiscal}" maxlength="9">
								<p:ajax event="blur" update=":frmLancamento:colHistorico" />
							</p:inputText>

							<p:outputLabel value="Emissão N.F"
								for=":frmLancamento:dtEmissaoNF" />
							<p:calendar id="dtEmissaoNF" mask="true" locale="pt"
								timeZone="America/Sao_Paulo" pattern="dd/MM/yyyy"
								value="#{ged.dtEmissaoNF}" />


							<p:outputLabel value="Histórico" />
							<p:inputTextarea id="txtComplemento" value="#{ged.complemento}"
								maxlength="150">
								<p:ajax event="blur" update=":frmLancamento:colHistorico" />
							</p:inputTextarea>


							<p:outputLabel value="Parcelado" />
							<h:panelGrid id="pnlSelParc" columns="8">
								<p:selectOneRadio id="sorParcelado" value="#{ged.parcelamento}"
									disabled="#{not empty ged.pci or ged.rateado == 'S'}">
									<f:selectItem itemLabel="S" itemValue="S" />
									<f:selectItem itemLabel="N" itemValue="N" />
									<p:ajax
										update=":frmLancamento:pnlSelParc :frmLancamento:colHistorico" />
									<p:ajax listener="#{ged.limparParcelado()}" />
								</p:selectOneRadio>
								<p:outputLabel id="oplParcelado" value="Parc.:"
									rendered="#{ged.parcelamento == 'S'}" style="float:right;" />
								<p:inputText id="iptParcelado" value="#{ged.pci}"
									style="width:40px;font-weight:bold;color:red;text-align:center;"
									onkeypress="validate(event)" maxlength="3"
									disabled="#{not empty ged.pci}"
									rendered="#{ged.parcelamento == 'S'}"
									required="#{ged.parcelamento == 'S'}"
									requiredMessage="Preencha 1º parcela!">
									<p:ajax update=":frmLancamento:colHistorico" />
								</p:inputText>
								<p:outputLabel id="optParcelamento" value=" de "
									rendered="#{ged.parcelamento == 'S'}" />
								<p:inputText id="iptHist" value="#{ged.pcf}"
									style="width:45px;font-weight:bold;color:red;text-align:center;"
									onkeypress="validate(event)" maxlength="4"
									disabled="#{not empty ged.pcf}"
									rendered="#{ged.parcelamento == 'S'}"
									required="#{ged.parcelamento == 'S'}"
									requiredMessage="Preencha 2º parcela!">
									<p:ajax update=":frmLancamento:colHistorico" />
								</p:inputText>
							</h:panelGrid>

							<p:outputLabel value="Histórico Completo" />
							<h:panelGrid id="colHistorico"
								style="word-wrap:break-word;max-width:400px;">
								<p:column>
									<p
										style="word-wrap: break-word; max-width: 400px; text-align: left;"
										align="right">
										<p:outputLabel id="historico1" value="#{ged.empresa}"
											rendered="#{not empty ged.empresa}" />
										<p:outputLabel value="&nbsp;-&nbsp;"
											rendered="#{ged.empresa != null and not empty ged.notaFiscal and ged.notaFiscal gt 0}" />
										<p:outputLabel id="historico2"
											value="#{ged.tipoDocumento} #{ged.notaFiscal}"
											rendered="#{not empty ged.notaFiscal and ged.notaFiscal gt 0}" />
										<p:outputLabel value="&nbsp;-&nbsp;"
											rendered="#{(not empty ged.notaFiscal and not empty ged.complemento) or (not empty ged.empresa and not empty ged.complemento)}" />
										<p:outputLabel id="historico3" value="#{ged.complemento}"
											rendered="#{not empty ged.complemento}" />

										<p:outputLabel id="historico4" value="&nbsp; - PC. #{ged.pci}"
											rendered="#{not empty ged.pci}" />
										<p:outputLabel id="historico5" value="/#{ged.pcf}"
											rendered="#{not empty ged.pcf}" />
									</p>
								</p:column>
							</h:panelGrid>
						</p:panelGrid>
					</h:panelGrid>

					<h:panelGrid id="gridDocs" border="0"
						style="display:inline-block;vertical-align:top;text-align:left">
						<p:commandButton value="Enviar arquivos"
							icon="fa fa-plus Fs16 white" update=":frmUploadArquivo"
							process="@this" oncomplete="PF('dlgUploadArquivo').show();" />
						<p:column>
							<p:dataTable id="tblArquivos" var="item"
								value="#{ged.listaArquivos}"
								emptyMessage="Nenhum resultado encontrado." style="width:450px;"
								scrollable="true" scrollHeight="150">
								<p:column headerText="Etiqueta" style="width:130px;">
									<p:outputLabel value="#{ged.converte(item.id)}"
										style="color:blue;word-wrap:break-word;" />
								</p:column>
								<p:column headerText="Nome" style="width:150px;">
									<p:outputLabel value="${item.nome_arquivo}"
										style="color:blue;word-wrap:break-word;" />
								</p:column>

								<p:column style="width:45px;">
									<p:commandButton
										actionListener="#{ged.visualizarImagem(ged.listaArquivos.indexOf(item))}"
										style="color:red;" icon="fa fa-download Fs16 white"
										ajax="false" update="plImagem">
									</p:commandButton>
								</p:column>
							</p:dataTable>

							<p:panel id="plImagem" header="Imagem"
								style="width: 630px !important;">
								<h:panelGrid id="gridMedia">
									<p:media player="pdf"
										value="#{ImgServiceBean.pdfLancamentoEtiqueta}" width="700"
										height="400" cache="false">
										<f:param name="etiqueta" value="#{ged.cdImagem}" />
									</p:media>
								</h:panelGrid>

							</p:panel>
						</p:column>

					</h:panelGrid>
					<p:separator />

					<p:panelGrid columns="2" style="margin-bottom:15px">
						<p:outputLabel value="Tipo de pagamento" />
						<p:selectOneMenu value="#{ged.tipoPagamento}"
							style="width: 400px !important;">
							<p:ajax listener="#{ged.limpaTipoConta()}"
								update=":frmLancamento:gridTiposPagamento" />
							<f:selectItem itemLabel="Nenhum" noSelectionOption="true" />
							<f:selectItem itemLabel="Crédito em Conta" itemValue="5" />
							<f:selectItem itemLabel="DOC" itemValue="7" />
							<f:selectItem itemLabel="Ficha de Compensação / Boleto"
								itemValue="8" />
							<f:selectItem
								itemLabel="Concessionárias - água / luz / telefone / gás / etc"
								itemValue="E" />
						</p:selectOneMenu>


					</p:panelGrid>
					<h:panelGrid id="gridTiposPagamento">
						<!-- Crédito em Conta -->
						<p:panelGrid id="gridCreditoEmConta" columns="1"
							rendered="#{ged.tipoPagamento == '5'}"
							style="vertical-align:bottom;">
							<p:column>
								<p:outputLabel value="Favorecido"
									for=":frmLancamento:txtNomeFavorecidoCC" />
								<p:inputText value="#{ged.nomeFavorecido}" style="width:325px;"
									id="txtNomeFavorecidoCC" />
								<p:commandButton icon="fa fa-search Fs16 white"
									style="margin-left:5px;"
									onclick="PF('dlgPesqFavorecido').show();" />
							</p:column>

							<p:column>
								<h:panelGrid id="pnlDadosBanco" columns="4">
									<p:outputLabel id="oplCodBanco" value="Código do Banco"
										for=":frmLancamento:txtCodBancoCC" />
									<p:inputText onkeypress="validate(event)" style="width:80px;"
										value="#{ged.codBanco}" id="txtCodBancoCC" maxlength="4">
										<p:ajax event="blur" listener="#{ged.pesquisarBanco()}"
											update=":frmLancamento:txtNomeBancoCC" />
									</p:inputText>
									<p:inputText id="txtNomeBancoCC" value="#{ged.nomeDoBanco}"
										style="width:400px;" />
									<p:commandButton icon="fa fa-search Fs16 white"
										style="margin-left:5px;" onclick="PF('dlgPesqBanco').show();" />
								</h:panelGrid>
							</p:column>
							<p:column>
								<h:panelGrid id="pnlDadosAgenc" columns="6">
									<p:outputLabel id="oplCodAgenc" value="Código da Agência"
										for=":frmLancamento:txtCodAgenciaCC" />
									<p:inputText onkeypress="validate(event)" style="width:80px;"
										value="#{ged.codAgencia}" id="txtCodAgenciaCC" />
									<p:outputLabel value="C/C" for=":frmLancamento:txtContaCC" />
									<p:inputText style="width:300px;" value="#{ged.cc}"
										id="txtContaCC" />
									<p:outputLabel id="oplCC" value="Digito"
										for=":frmLancamento:txtDigitoCC" />
									<p:inputText style="width:40px;" value="#{ged.dac}"
										id="txtDigitoCC" />
								</h:panelGrid>
							</p:column>
							<p:column>
								<h:panelGrid id="pnlDadosConta" columns="6">
									<p:outputLabel id="oplTipoconta" value="Conta poupança"
										for=":frmLancamento:oneRadioCPoupancaCC" />
									<p:selectOneRadio id="oneRadioCPoupancaCC"
										value="#{ged.contaPoupanca}">
										<f:selectItem itemLabel="S" itemValue="S" />
										<f:selectItem itemLabel="N" itemValue="N" />
									</p:selectOneRadio>
									<p:outputLabel id="oplTipoPessoa" value="Tipo Pessoa"
										for=":frmLancamento:oneRadioTipoPessoaCC"
										style="margin-left:30px;" />
									<p:selectOneRadio value="#{ged.tipoPessoa}"
										id="oneRadioTipoPessoaCC">
										<f:selectItem itemLabel="F" itemValue="F" />
										<f:selectItem itemLabel="J" itemValue="J" />
									</p:selectOneRadio>
									<p:outputLabel id="oplCPFCNPJ" value="CPF/CNPJ"
										style="margin-left:30px;" for=":frmLancamento:txtCpfCnpjCC" />
									<p:inputText style="width:150px;" id="txtCpfCnpjCC"
										value="#{ged.cpf_cnpj}" onkeypress="validate(event)" />
								</h:panelGrid>
							</p:column>
							<p:column rendered="false">
								<h:panelGrid columns="5">
									<p:outputLabel value="Tipo de pagamento" />
									<p:inputText style="width:80px;" value="#{ged.tipoPagto}" />
									<p:selectOneMenu style="width:300px;" value="#{ged.codBarras}" />
									<p:outputLabel value="Código do Movimento" />
									<p:inputText onkeypress="validate(event)" style="width:80px;"
										value="#{ged.codMovimento}" />
								</h:panelGrid>
							</p:column>
						</p:panelGrid>

						<p:panelGrid id="gridDoc" columns="1"
							rendered="#{ged.tipoPagamento == '7'}"
							style="vertical-align:bottom;">
							<p:column>
								<p:outputLabel id="oplFavor" value="Favorecido"
									for=":frmLancamento:txtNomeFavorecidoDoc" />
								<p:inputText value="#{ged.nomeFavorecido}" style="width:325px;"
									id="txtNomeFavorecidoDoc" />
								<p:commandButton icon="fa fa-search Fs16 white"
									style="margin-left:5px;"
									onclick="PF('dlgPesqFavorecido').show();" />
							</p:column>
							<p:column>
								<h:panelGrid id="pnlCodBanco" columns="4">
									<p:outputLabel id="oplCodBanco2" value="Banco Destino"
										for=":frmLancamento:txtCodBancoDoc" />
									<p:inputText onkeypress="validate(event)" id="txtCodBancoDoc"
										style="width:80px;" value="#{ged.codBanco}" maxlength="4">
										<p:ajax listener="#{ged.pesquisarBanco()}"
											update=":frmLancamento:txtNomeBancoDoc" />
									</p:inputText>
									<p:inputText id="txtNomeBancoDoc" value="#{ged.nomeDoBanco}"
										style="width:400px;" />
									<p:commandButton icon="fa fa-search Fs16 white"
										style="margin-left:5px;" onclick="PF('dlgPesqBanco').show();" />
								</h:panelGrid>
							</p:column>
							<p:column>
								<h:panelGrid id="pnlCodigoAgencia" columns="8">
									<p:outputLabel id="oplCodigoAgencia" value="Agência"
										for=":frmLancamento:txtCodAgenciaDoc" />
									<p:inputText style="width:80px;" onkeypress="validate(event)"
										value="#{ged.codAgencia}" id="txtCodAgenciaDoc" />
									<p:outputLabel value="C/C" for=":frmLancamento:txtContaDoc" />
									<p:inputText style="width:250px;" value="#{ged.cc}"
										id="txtContaDoc" />
									<p:outputLabel id="oplDigito" value="Digito"
										for=":frmLancamento:txtDigitoDoc" />
									<p:inputText style="width:40px;" value="#{ged.dac}"
										id="txtDigitoDoc" />
								</h:panelGrid>
							</p:column>
							<p:column>
								<h:panelGrid id="pnlTipoDaConta" columns="6">
									<p:outputLabel id="oplContaPoupanca" value="Conta poupança"
										for=":frmLancamento:txtCPoupancaDoc" />
									<p:selectOneRadio value="#{ged.contaPoupanca}"
										id="txtCPoupancaDoc">
										<f:selectItem itemLabel="S" itemValue="S" />
										<f:selectItem itemLabel="N" itemValue="N" />
									</p:selectOneRadio>
									<p:outputLabel id="opltipoDePessoa" value="Tipo Pessoa"
										style="margin-left:30px;"
										for=":frmLancamento:txtTipoPessoaDoc" />
									<p:selectOneRadio value="#{ged.tipoPessoa}"
										id="txtTipoPessoaDoc">
										<f:selectItem itemLabel="F" itemValue="F" />
										<f:selectItem itemLabel="J" itemValue="J" />
									</p:selectOneRadio>
									<p:outputLabel id="oplCnpjCpf" value="CPF/CNPJ"
										style="margin-left:30px;" for=":frmLancamento:txtCpfCnpjDoc" />
									<p:inputText style="width:150px;" value="#{ged.cpf_cnpj}"
										onkeypress="validate(event)" id="txtCpfCnpjDoc" />
								</h:panelGrid>
							</p:column>

							<p:column rendered="false">
								<h:panelGrid columns="5">
									<p:outputLabel value="Tipo de pagamento" />
									<p:inputText style="width:80px;" value="#{ged.tipoPagto}" />
									<p:selectOneMenu style="width:300px;" />
									<p:outputLabel value="Usar TED" />
									<p:selectBooleanCheckbox value="#{ged.usarTED}" />
								</h:panelGrid>
							</p:column>
						</p:panelGrid>


						<p:panelGrid rendered="#{ged.tipoPagamento == '8'}" columns="1">
							<p:column>
								<h:panelGrid id="pnlDadosBoleto" columns="2">
									<p:outputLabel id="oplCodBarras" value="Código de barras"
										for=":frmLancamento:txtCodBarras" />
									<p:inputText id="txtCodBarras" style="width:700px;"
										value="#{ged.codigoBarras}" onkeydown="validaBarras(event);">
										<p:ajax event="blur" update=":frmLancamento:linhaDigBan"
											listener="#{ged.listarLinhaDigitavel()}" />
									</p:inputText>
								</h:panelGrid>
							</p:column>
							<p:column>
								<h:panelGrid columns="6" id="linhaDigBan">
									<p:outputLabel id="oplLinhaDig" value="Linha digitável" />
									<p:inputMask mask="99999.99999" maxlength="11" id="ldComp1"
										onkeyup="validaLDComp1();" value="#{ged.ldCampo1}"
										style="width:150px;" />
									<p:inputMask mask="99999.999999" maxlength="12" id="ldComp2"
										onkeyup="validaLDComp2();" value="#{ged.ldCampo2}"
										style="width:150px;" />
									<p:inputMask mask="99999.999999" id="ldComp3"
										onkeyup="validaLDComp3();" maxlength="12"
										value="#{ged.ldCampo3}" style="width:150px;" />
									<p:inputMask mask="9" maxlength="1" id="ldComp4"
										onkeyup="validaLDComp4();" value="#{ged.ldDac}"
										style="width:40px;" />
									<p:inputMask mask="99999999999999" maxlength="14" id="ldComp5"
										onkeyup="validaLDComp5();" value="#{ged.ldValor}"
										style="width:150px;" onblur="validaLD();" />
								</h:panelGrid>
							</p:column>
						</p:panelGrid>

						<p:panelGrid id="pnlConcerssionaria"
							rendered="#{ged.tipoPagamento == 'E'}" columns="1">
							<p:column>
								<h:panelGrid id="pnlCodDeBarras" columns="2">
									<p:outputLabel id="oplCodDeBarr" value="Código de barras"
										for=":frmLancamento:txtCodBarras2" />
									<p:inputText style="width:700px;" id="txtCodBarras2"
										value="#{ged.codigoBarras}" onkeydown="validaBarras(event);">
										<p:ajax event="blur" update=":frmLancamento:linhaDigConc"
											listener="#{ged.listarLinhaDigitavel()}" />
									</p:inputText>
								</h:panelGrid>
							</p:column>

							<p:column>
								<h:panelGrid columns="6" id="linhaDigConc">
									<p:outputLabel value="Linha digitável" />
									<p:inputMask mask="999999999999" maxlength="12" id="ldConc1"
										onkeyup="validaLDConc1();" value="#{ged.concSegbarra1}"
										style="width:150px;" />
									<p:inputMask mask="999999999999" maxlength="12" id="ldConc2"
										onkeyup="validaLDConc2();" value="#{ged.concSegbarra2}"
										style="width:150px;" />
									<p:inputMask mask="999999999999" maxlength="12" id="ldConc3"
										onkeyup="validaLDConc3();" value="#{ged.concSegbarra3}"
										style="width:150px;" />
									<p:inputMask mask="999999999999" maxlength="12" id="ldConc4"
										onkeyup="validaLDConc4();" value="#{ged.concSegbarra4}"
										style="width:150px;" onblur="validaLD();" />
								</h:panelGrid>
							</p:column>
						</p:panelGrid>
					</h:panelGrid>
					<p:separator />
					<div style="margin-top: 20px; margin-bottom: 15px;">
						<p:panelGrid columns="2"
							style="display:inline-block;text-align:left;">
							<f:facet name="header">
								<p:outputLabel value="RESUMO DO LANÇAMENTO" />
							</f:facet>
							<p:outputLabel value="Vencimento:" />
							<p:outputLabel value="#{ged.vencimento}">
								<f:convertDateTime pattern="dd/MM/yyyy"
									timeZone="America/Sao_Paulo" locale="pt" />
							</p:outputLabel>
							<p:outputLabel value="Valor:" rendered="#{ged.rateado == 'N'}" />
							<p:outputLabel value="#{ged.valor}"
								rendered="#{ged.rateado == 'N'}">
								<f:convertNumber type="currency" currencySymbol="R$" locale="pt" />
							</p:outputLabel>
							<p:outputLabel value="Valor Bruto:"
								rendered="#{ged.rateado == 'S'}" />
							<p:outputLabel value="#{ged.valorBruto}"
								rendered="#{ged.rateado == 'S'}">
								<f:convertNumber type="currency" currencySymbol="R$" locale="pt" />
							</p:outputLabel>

							<p:outputLabel value="Conta:" rendered="#{ged.rateado == 'N'}" />
							<p:outputLabel value="#{ged.contaContabil}"
								rendered="#{ged.rateado == 'N'}" />

							<p:outputLabel value="Contas:" rendered="#{ged.rateado == 'S'}" />
							<p:column rendered="#{ged.rateado == 'S'}">
								<c:forEach var="item" items="#{ged.listaDeCodReduzido}">
									<p:outputLabel value="#{item}" />;&nbsp;
						<br />
								</c:forEach>
							</p:column>

							<p:outputLabel value="Fornecedor:" />
							<p:outputLabel value="#{ged.fornecedor}" />
							<p:outputLabel value="NF:" />
							<p:outputLabel value="#{ged.notaFiscal}" />
							<p:outputLabel value="Histórico:" />
							<p:column>
								<p:outputLabel id="historico1Resumo" value="#{ged.empresa}"
									rendered="#{not empty ged.empresa}" />
								<p:outputLabel value="&nbsp;-&nbsp;"
									rendered="#{ged.empresa != null and not empty ged.notaFiscal and ged.notaFiscal gt 0}" />
								<p:outputLabel id="historico2Resumo"
									value="NF. #{ged.notaFiscal}"
									rendered="#{not empty ged.notaFiscal and ged.notaFiscal gt 0}" />
								<p:outputLabel value="&nbsp;-&nbsp;"
									rendered="#{(not empty ged.notaFiscal and not empty ged.complemento) or (not empty ged.empresa and not empty ged.complemento)}" />
								<p:outputLabel id="historico3Resumo" value="#{ged.complemento}"
									rendered="#{not empty ged.complemento}" />
							</p:column>
							<p:outputLabel value="Tipo pagamento:" />
							<p:outputLabel value="#{ged.tipoPagamento}" />
							<p:outputLabel value="Cód. de barras:" />
							<p:outputLabel value="#{ged.codigoBarras}" />
							<p:outputLabel value="Id de imagem:" />
							<p:column>
								<c:forEach var="item" items="#{ged.listaArquivos}">
									<p:outputLabel value="#{ged.converte(item.id)}" />;&nbsp;
						<br />
								</c:forEach>
							</p:column>
						</p:panelGrid>

					</div>

					<c:if test="#{ged.rateado == 'N'}">
						<h:panelGrid columns="2"
							style="width:400px;text-align:center;margin-top:15px;"
							rendered="#{ged.grid3}">
							<p:commandButton value="Voltar" update=":frmLancamento"
								icon="fa fa-angle-left Fs16 white" ajax="false">
								<f:setPropertyActionListener target="#{ged.grid2}" value="true" />
								<f:setPropertyActionListener target="#{ged.grid3}" value="false" />
							</p:commandButton>
							<p:commandButton value="Salvar"
								onclick="PF('dlgObsLancto1').show();"
								icon="fa fa-save Fs16 white" />
						</h:panelGrid>
					</c:if>
					<c:if test="#{ged.rateado == 'S'}">
						<h:panelGrid columns="2"
							style="width:400px;text-align:center;margin-top:15px;"
							rendered="#{ged.grid3}">
							<p:commandButton value="Voltar" update=":frmLancamento"
								icon="fa fa-angle-left Fs16 white" ajax="false">
								<f:setPropertyActionListener target="#{ged.grid2}" value="true" />
								<f:setPropertyActionListener target="#{ged.grid3}" value="false" />
							</p:commandButton>
							<p:commandButton value="Salvar"
								onclick="PF('dlgObsLancto2').show();"
								icon="fa fa-save Fs16 white" />
						</h:panelGrid>
					</c:if>
				</div>

				<p:commandButton id="btnValidaBarras" value="atualizar"
					actionListener="#{ged.listarLinhaDigitavel()}"
					update=":frmLancamento:linhaDigBan,:frmLancamento:linhaDigConc"
					style="visibility:hidden;" oncomplete="focusProximo();" />

				<p:commandButton id="btnValidaLD" value="atualizar"
					actionListener="#{ged.listarCodigoBarras()}"
					update=":frmLancamento:txtCodBarras,:frmLancamento:txtCodBarras2"
					style="visibility:hidden;" oncomplete="focusProximo();" />
			</p:panel>
			<p:commandButton value="Voltar" action="#{ged.voltar()}"
				style="float: left !important;"
				update=":frmLancamento:plgGrid1 :frmLancamento:plgGrid2" />
		</h:panelGrid>

	</h:form>

	<h:outputScript library="javascript/maskMoney"
		name="jquery.maskMoney.js" />

	<script language="javascript">
	//<![CDATA[
  	$(document).ready(function(){
  		$(PrimeFaces.escapeClientId('frmLancamento:txtValor')).maskMoney({prefix:'R$ ', thousands:'.', decimal:',', affixesStay: true});
	});

	$(document).on('keypress',function(event){
		if (!$(event.target).is(":button")){
			if(event.keyCode == 13){
				event.preventDefault();
			}else{
				$('.content .ui-inputtext,.content .ui-inputtextarea').on('keyup', function(event){
					  var x = event.keyCode;
					  if((x>64&&x<91)||(x>96&&x<123)||(x>127&&x<155)||(x>159&&x<166) || (x==186)){
					  	up(this);
					  }
				});
			}
		}
	});
	
	function validaBarras(evt){
		var theEvent = evt || window.event;
		var key = theEvent.keyCode || theEvent.which;
		if (key == 13) {
			evt.preventDefault();
			$("[id='frmLancamento:btnValidaBarras']").click();
		}
	}

 	function validaLD(){
		$("[id='frmLancamento:btnValidaLD']").click();
	}
 	
	//Compensação/Boleto
	function validaLDComp1() {
		var valor = $("[id='frmLancamento:ldComp1']").val();
		valor = valor.replace(/\_/g, '');
		if (valor.length == 11) {
			$("[id='frmLancamento:ldComp2']").focus();
		}
	}

	function validaLDComp2() {
		var valor = $("[id='frmLancamento:ldComp2']").val();
		valor = valor.replace(/\_/g, '');
		if (valor.length == 12) {
			$("[id='frmLancamento:ldComp3']").focus();
		}
	}

	function validaLDComp3() {
		var valor = $("[id='frmLancamento:ldComp3']").val();
		valor = valor.replace(/\_/g, '');
		if (valor.length == 12) {
			$("[id='frmLancamento:ldComp4']").focus();
		}
	}

	function validaLDComp4() {
		var valor = $("[id='frmLancamento:ldComp4']").val();
		valor = valor.replace(/\_/g, '');
		if (valor.length == 1) {
			$("[id='frmLancamento:ldComp5']").focus();
		}
	}
	
	function validaLDComp5() {
		var valor = $("[id='frmLancamento:ldComp5']").val();
		valor = valor.replace(/\_/g, '');
		if (valor.length == 14) {
			$("[id='frmLancamento:btnValidaLD']").click();
		}
	}

	//Concessionária
	function validaLDConc1() {
		var valor = $("[id='frmLancamento:ldConc1']").val();
		valor = valor.replace(/\_/g, '');
		if (valor.length == 12) {
			$("[id='frmLancamento:ldConc2']").focus();
		}
	}

	function validaLDConc2() {
		var valor = $("[id='frmLancamento:ldConc2']").val();
		valor = valor.replace(/\_/g, '');
		if (valor.length == 12) {
			$("[id='frmLancamento:ldConc3']").focus();
		}
	}

	function validaLDConc3() {
		var valor = $("[id='frmLancamento:ldConc3']").val();
		valor = valor.replace(/\_/g, '');
		if (valor.length == 12) {
			$("[id='frmLancamento:ldConc4']").focus();
		}
	}
	
	function validaLDConc4() {
		var valor = $("[id='frmLancamento:ldConc4']").val();
		valor = valor.replace(/\_/g, '');
		if (valor.length == 12) {
			$("[id='frmLancamento:btnValidaLD']").click();
		}
	}
	
	function focusProximo(){
		$("[id='frmLancamento:btnProximo2']").focus();
	}
	//]]>
	</script>
	<script type="text/javascript">
							$(PrimeFaces.escapeClientId('frmLancamento:txtValor')).maskMoney({prefix:'R$ ', thousands:'.', decimal:',', affixesStay: true});
						</script>
</ui:composition>
</html>